// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Category {
  id              String     @id @default(uuid())
  name            String     @db.VarChar(30)
  normalized_name String     @unique @db.VarChar(30)
  PostDatas       MetaData[]
}

model Area {
  id              String @id @default(uuid())
  name            String @db.VarChar(30)
  normalized_name String @unique @db.VarChar(30)
}

model Tag {
  id        String     @id @default(uuid())
  name      String     @unique @db.VarChar(30)
  PostDatas MetaData[]
}

model SEOTag {
  id         String   @id @default(uuid())
  name       String   @unique @db.VarChar(30)
  metadata   MetaData @relation(fields: [metadataId], references: [id])
  metadataId String
}

model SEODesc {
  id       String    @id @default(uuid())
  name     String    @db.VarChar(120)
  metadata MetaData?
}

model MetaData {
  id         String    @id @default(uuid())
  created    DateTime  @default(now())
  visible    Boolean   @default(false)
  post       Post      @relation(fields: [postId], references: [id])
  postId     String    @unique
  category   Category? @relation(fields: [categoryId], references: [id])
  categoryId String?
  tag        Tag[]
  seoTag     SEOTag[]
  seoDesc    SEODesc   @relation(fields: [sEODescId], references: [id])
  sEODescId  String    @unique
}

model Post {
  id          String    @id @default(uuid())
  featuredImg String    @db.VarChar(48)
  title       String    @db.VarChar(30)
  content     String
  uri         String    @db.VarChar(30)
  metadata    MetaData?
}

// RELATIONS OTO: One To One, OTM: One To Many, MTM: Many To Many

// Post OTO Metadata
// Metadata OTO Category
// Metadata OTO User
// Metadata OTO Area
// Metadata OTO Seodesc
// Tag OTM Metadata
// Seotag OTM Metadata
